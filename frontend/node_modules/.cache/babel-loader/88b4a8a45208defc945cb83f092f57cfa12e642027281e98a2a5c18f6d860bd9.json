{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import Background_music from\"../assets/Background_music.mp3\";import fiveToEight from\"../assets/five-eight.mp3\";import eightToEleven from\"../assets/eight-eleven.mp3\";import elevenToThirteen from\"../assets/eleven-thirteen.mp3\";import fourteen from\"../assets/fourteen.mp3\";import fifteen from\"../assets/fifteen.mp3\";import millionaireRave from\"../assets/MillionaireRave.mp3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Quiz=_ref=>{let{questions,questionNumber,setQuestionNumber,setTimeOut}=_ref;const[question,setQuestion]=useState(null);const[selectedAnswer,setSelectedAnswer]=useState(null);const[className,setClassName]=useState(\"answer\");const[answersLocked,setAnswersLocked]=useState(false);// refs for various audio tracks\nconst audioRefs={backgroundMusic:useRef(new Audio(Background_music)),fiveToEight:useRef(new Audio(fiveToEight)),eightToEleven:useRef(new Audio(eightToEleven)),elevenToThirteen:useRef(new Audio(elevenToThirteen)),fourteen:useRef(new Audio(fourteen)),fifteen:useRef(new Audio(fifteen)),millionaireRave:useRef(new Audio(millionaireRave))// TODO: add correct/incorrect sounds, maybe lock in answer\n};// Better way to play multiple audios. Plays song for the round and stops and resets all other audio tracks\nconst playAudio=audioRef=>{Object.values(audioRefs).forEach(ref=>{if(ref.current!==audioRef.current){ref.current.pause();ref.current.currentTime=0;}});// loop the playing songs\naudioRef.current.loop=true;audioRef.current.play();};useEffect(()=>{const{backgroundMusic,fiveToEight,eightToEleven,elevenToThirteen,fourteen,fifteen,millionaireRave}=audioRefs;// Play specific songs for question numbers. Works fine for different rounds\nif(questionNumber<6){playAudio(backgroundMusic);}else if(questionNumber<9){playAudio(fiveToEight);}else if(questionNumber<12){playAudio(eightToEleven);}else if(questionNumber<14){playAudio(elevenToThirteen);}else if(questionNumber===14){playAudio(fourteen);}else if(questionNumber===15){playAudio(fifteen);}else if(questionNumber===16){playAudio(millionaireRave);}},[questionNumber]);// Update the current question when the question number changes\nuseEffect(()=>{setQuestion(questions[questionNumber-1]);},[questions,questionNumber]);// Delays the execution of a callback function for any given time\nconst delay=(duration,callBack)=>{setTimeout(()=>{callBack();},duration);};// Handles the click for answers\nconst handleClick=item=>{if(!answersLocked){setSelectedAnswer(prevSelectedAnswer=>prevSelectedAnswer===item?null:item);setClassName(\"answer active\");console.log(selectedAnswer);}else{console.log(\"Answers are locked!\");}};// Handles the \"Lock In Answer\" button click\nconst handleLockIn=()=>{if(!selectedAnswer){// Can not lock in if answer is not selected\nalert(\"Please select an answer before locking in!\");console.log(\"Select answer before locking in!\");}else{if(!answersLocked){// If no answer is locked in, lock the current selected answer\nsetAnswersLocked(true);// Lock answers to prevent multiple clicks\nif(selectedAnswer){// If an answer is selected\n// Set the className only for the selected answer with a 3-second delay for the main animation\ndelay(3000,()=>{setClassName(selectedAnswer.correct?\"answer correct\":\"answer incorrect\");console.log(\"Selected Answer:\",selectedAnswer);// If the locked-in answer is correct, move to the next question after 1 sec\nif(selectedAnswer.correct){delay(1000,()=>{setQuestionNumber(prev=>prev+1);setSelectedAnswer(null);setClassName(\"answer\");setAnswersLocked(false);// Unlock answers for the next question\n});}else{// If the locked-in answer is incorrect, reset className for the incorrect answer after 1 sec\ndelay(1000,()=>{setClassName(\"answer\");setAnswersLocked(false);// Unlock answers for the next question\nconsole.log(\"Answer was wrong!!!!\");// Set the timeOut state to true to trigger \"game over\" message\nsetTimeOut(true);});}});}}else{// If answers are already locked, console log\nconsole.log(\"Answers are already locked!\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"quiz\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"question\",children:question===null||question===void 0?void 0:question.question}),/*#__PURE__*/_jsx(\"div\",{className:\"answers \".concat(answersLocked?\"answers-locked\":\"\"),children:question===null||question===void 0?void 0:question.answers.map(item=>/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(answersLocked?item===selectedAnswer?item.correct?\"answer correct\":\"answer incorrect\":\"answer\":selectedAnswer===item?\"answer active\":\"answer\"),onClick:()=>!answersLocked&&handleClick(item),children:item.text}))}),/*#__PURE__*/_jsx(\"button\",{className:\"lock-in-button\",onClick:handleLockIn,children:\"Lukitse vastaus\"})]});};export default Quiz;","map":{"version":3,"names":["React","useState","useEffect","useRef","Background_music","fiveToEight","eightToEleven","elevenToThirteen","fourteen","fifteen","millionaireRave","jsx","_jsx","jsxs","_jsxs","Quiz","_ref","questions","questionNumber","setQuestionNumber","setTimeOut","question","setQuestion","selectedAnswer","setSelectedAnswer","className","setClassName","answersLocked","setAnswersLocked","audioRefs","backgroundMusic","Audio","playAudio","audioRef","Object","values","forEach","ref","current","pause","currentTime","loop","play","delay","duration","callBack","setTimeout","handleClick","item","prevSelectedAnswer","console","log","handleLockIn","alert","correct","prev","children","concat","answers","map","onClick","text"],"sources":["C:/Users/tammi/Desktop/react-millionaire/frontend/src/components/Quiz.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport Background_music from \"../assets/Background_music.mp3\";\r\nimport fiveToEight from \"../assets/five-eight.mp3\";\r\nimport eightToEleven from \"../assets/eight-eleven.mp3\";\r\nimport elevenToThirteen from \"../assets/eleven-thirteen.mp3\";\r\nimport fourteen from \"../assets/fourteen.mp3\";\r\nimport fifteen from \"../assets/fifteen.mp3\";\r\nimport millionaireRave from \"../assets/MillionaireRave.mp3\";\r\n\r\nconst Quiz = ({ questions, questionNumber, setQuestionNumber, setTimeOut }) => {\r\n  const [question, setQuestion] = useState(null);\r\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\r\n  const [className, setClassName] = useState(\"answer\");\r\n  const [answersLocked, setAnswersLocked] = useState(false);\r\n\r\n  // refs for various audio tracks\r\n  const audioRefs = {\r\n    backgroundMusic: useRef(new Audio(Background_music)),\r\n    fiveToEight: useRef(new Audio(fiveToEight)),\r\n    eightToEleven: useRef(new Audio(eightToEleven)),\r\n    elevenToThirteen: useRef(new Audio(elevenToThirteen)),\r\n    fourteen: useRef(new Audio(fourteen)),\r\n    fifteen: useRef(new Audio(fifteen)),\r\n    millionaireRave: useRef(new Audio(millionaireRave)),\r\n    // TODO: add correct/incorrect sounds, maybe lock in answer\r\n  };\r\n\r\n  // Better way to play multiple audios. Plays song for the round and stops and resets all other audio tracks\r\n  const playAudio = (audioRef) => {\r\n    Object.values(audioRefs).forEach((ref) => {\r\n      if (ref.current !== audioRef.current) {\r\n        ref.current.pause();\r\n        ref.current.currentTime = 0;\r\n      }\r\n    });\r\n\r\n    // loop the playing songs\r\n    audioRef.current.loop = true;\r\n    audioRef.current.play();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const {\r\n      backgroundMusic,\r\n      fiveToEight,\r\n      eightToEleven,\r\n      elevenToThirteen,\r\n      fourteen,\r\n      fifteen,\r\n      millionaireRave,\r\n    } = audioRefs;\r\n\r\n    // Play specific songs for question numbers. Works fine for different rounds\r\n    if (questionNumber < 6) {\r\n      playAudio(backgroundMusic);\r\n    } else if (questionNumber < 9) {\r\n      playAudio(fiveToEight);\r\n    } else if (questionNumber < 12) {\r\n      playAudio(eightToEleven);\r\n    } else if (questionNumber < 14) {\r\n      playAudio(elevenToThirteen);\r\n    } else if (questionNumber === 14) {\r\n      playAudio(fourteen);\r\n    } else if (questionNumber === 15) {\r\n      playAudio(fifteen);\r\n    } else if (questionNumber === 16) {\r\n      playAudio(millionaireRave);\r\n    }\r\n  }, [questionNumber]);\r\n\r\n  // Update the current question when the question number changes\r\n  useEffect(() => {\r\n    setQuestion(questions[questionNumber - 1]);\r\n  }, [questions, questionNumber]);\r\n\r\n  // Delays the execution of a callback function for any given time\r\n  const delay = (duration, callBack) => {\r\n    setTimeout(() => {\r\n      callBack();\r\n    }, duration);\r\n  };\r\n\r\n  // Handles the click for answers\r\n  const handleClick = (item) => {\r\n    if (!answersLocked) {\r\n      setSelectedAnswer((prevSelectedAnswer) =>\r\n        prevSelectedAnswer === item ? null : item\r\n      );\r\n      setClassName(\"answer active\");\r\n      console.log(selectedAnswer);\r\n    } else {\r\n      console.log(\"Answers are locked!\");\r\n    }\r\n  };\r\n\r\n  // Handles the \"Lock In Answer\" button click\r\n  const handleLockIn = () => {\r\n    if (!selectedAnswer) {\r\n      // Can not lock in if answer is not selected\r\n      alert(\"Please select an answer before locking in!\");\r\n      console.log(\"Select answer before locking in!\");\r\n    } else {\r\n      if (!answersLocked) {\r\n        // If no answer is locked in, lock the current selected answer\r\n        setAnswersLocked(true); // Lock answers to prevent multiple clicks\r\n\r\n        if (selectedAnswer) {\r\n          // If an answer is selected\r\n          // Set the className only for the selected answer with a 3-second delay for the main animation\r\n          delay(3000, () => {\r\n            setClassName(\r\n              selectedAnswer.correct ? \"answer correct\" : \"answer incorrect\"\r\n            );\r\n\r\n            console.log(\"Selected Answer:\", selectedAnswer);\r\n\r\n            // If the locked-in answer is correct, move to the next question after 1 sec\r\n            if (selectedAnswer.correct) {\r\n              delay(1000, () => {\r\n                setQuestionNumber((prev) => prev + 1);\r\n                setSelectedAnswer(null);\r\n                setClassName(\"answer\");\r\n                setAnswersLocked(false); // Unlock answers for the next question\r\n              });\r\n            } else {\r\n              // If the locked-in answer is incorrect, reset className for the incorrect answer after 1 sec\r\n              delay(1000, () => {\r\n                setClassName(\"answer\");\r\n                setAnswersLocked(false); // Unlock answers for the next question\r\n                console.log(\"Answer was wrong!!!!\");\r\n                // Set the timeOut state to true to trigger \"game over\" message\r\n                setTimeOut(true);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n        // If answers are already locked, console log\r\n        console.log(\"Answers are already locked!\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"quiz\">\r\n      <div className=\"question\">{question?.question}</div>\r\n      <div className={`answers ${answersLocked ? \"answers-locked\" : \"\"}`}>\r\n        {question?.answers.map((item) => (\r\n          <div\r\n            className={`${\r\n              answersLocked\r\n                ? item === selectedAnswer\r\n                  ? item.correct\r\n                    ? \"answer correct\"\r\n                    : \"answer incorrect\"\r\n                  : \"answer\"\r\n                : selectedAnswer === item\r\n                ? \"answer active\"\r\n                : \"answer\"\r\n            }`}\r\n            onClick={() => !answersLocked && handleClick(item)}\r\n          >\r\n            {item.text}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <button className=\"lock-in-button\" onClick={handleLockIn}>\r\n        Lukitse vastaus\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Quiz;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}